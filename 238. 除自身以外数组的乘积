use an array and an auxiliary variable

//ts
  function productExceptSelf(nums: number[]): number[] {
      let ans: Array<number> = [];
      ans[0] = 1;
      for (let i = 1; i < nums.length; ++i) {
          ans[i] = ans[i - 1] * nums[i - 1];
      }
      let rightVal: number = 1;
      for (let i = nums.length - 1; i >= 0; --i) {
          ans[i] *= rightVal;
          rightVal *= nums[i];
      }
      return ans;
  };
  
//js
  /**
   * @param {number[]} nums
   * @return {number[]}
   */
  var productExceptSelf = function(nums) {
      let ans = [nums.length];
      ans[0] = 1;
      for (let i = 1; i < nums.length; ++i) {
          ans[i] = ans[i - 1] * nums[i - 1];
      }
      let rightVal = 1;
      for (let i = nums.length - 1; i >= 0; --i) {
          ans[i] *= rightVal;
          rightVal *= nums[i];
      }
      return ans;
  };
